<div class="flex flex-col mt-2">
  <div class="absolute z-50 top-1/2 left-1/2" *ngIf="showSpinner">
    <mat-spinner></mat-spinner>
  </div>

  <!-- search GitLab groups and projects -->
  <div class="flex items-center">
    <div class="text-sm font-bold text-purple-800 uppercase">GitLab Repositories</div>
    <div class="relative flex flex-wrap items-stretch mb-2 focus:outline-none">
      <span
        class="absolute items-center justify-center w-8 h-full py-1 pl-2 text-base font-normal leading-snug text-center text-gray-400 rounded">
        <fa-icon
          class="absolute z-10 items-center justify-center h-full py-1 -ml-1 text-base font-normal leading-snug text-center text-gray-400 rounded "
          title="Search" size="sm" [icon]="faSearch">
        </fa-icon>
      </span>
      <input placeholder="Search projects and groups ..." [(ngModel)]="projectSearch"
        class="relative pl-8 mt-2 ml-2 text-sm text-gray-600 placeholder-gray-400 bg-white border border-purple-400 rounded outline-none w-96 focus:outline-none" />
    </div>
  </div>

  <hr class="mt-2">

  <!-- Create Scan project section -->

  <!-- Scan project setup -->

  <div class="flex flex-col text-blue-800">
    <span class="pt-2 text-xs font-bold text-purple-800 bg-purple-50"><span class="pr-2 uppercase">Quick Setup</span>
      <span>(select desired groups and projects below to create a scan project)</span> </span>
    <div class="flex items-center justify-between">
      <form [formGroup]="projectForm" class="flex items-center space-x-2 text-sm">
        <div class="relative flex flex-wrap focus:outline-none">

          <mat-form-field class="text-blue-800 focus:outline-none">
            <mat-label>Project Name</mat-label>
            <input matInput placeholder="Ex. Frontend API" formControlName="projectName" required>
          </mat-form-field>
        </div>
        <div class="flex items-center ">
          <div class="flex items-center space-x-2">
            <div class="flex items-center space-x-1">
              <div class="">Workspace</div>
              <select formControlName="workspace"
                class="h-8 px-4 py-2 pr-8 mr-2 text-xs leading-tight bg-white border border-gray-400 rounded shadow hover:border-gray-500 focus:outline-none focus:shadow-outline focus:border-purple-500 focus:ring-purple-500">
                <option *ngFor="let ws of existingWorkspaces" [ngValue]="ws">{{ws}}</option>
              </select>
            </div>
            <span class="uppercase">Or</span>
            <div class="items-center">
              <div class="inline-flex items-center">
                <input type="checkbox" formControlName="newWorkspace" class="w-3 h-3">
                <!-- <span class="ml-2">Create</span> -->
              </div>
            </div>
            <mat-form-field class="text-blue-800 focus:outline-none">
              <mat-label>Create New Workspace</mat-label>
              <input matInput placeholder="Ex. Backend Services" formControlName="newWorkspaceValue">
            </mat-form-field>

          </div>
        </div>
      </form>
      <div class="pr-2"><button mat-button
          class="w-full py-2 mt-6 text-xs font-medium leading-3 text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200">Create
          Scan Project</button>
      </div>

    </div>
  </div>

  <hr class="my-2">

  <div *ngIf="gitlabProjects">

    <div *ngFor="let projG of gitlabProjects | gitlabSorter | gitlabFilter:projectSearch">

      <app-gitlab-project-listitem [groupedProjects]=projG> </app-gitlab-project-listitem>
    </div>

  </div>

</div>
