<div class="flex flex-col p-2 -mt-2 text-sm text-purple-800">
  <span class="p-2 text-sm font-semibold uppercase bg-purple-100">Setup LDAP Authentication & Synchronization </span>


  <form class="flex items-center w-full p-2" [formGroup]="ldapForm" (ngSubmit)="configureLDAP($event)">

    <div class="flex flex-col items-center w-full">
      <div class="flex w-full space-x-2">
        <mat-form-field class="w-1/2 text-blue-800 focus:outline-none">
          <mat-label>LDAP Server</mat-label>
          <input matInput placeholder="Example: ldap.mydomain.com" formControlName="ldapServer" required>
        </mat-form-field>

        <mat-form-field class="w-1/2 text-blue-800 focus:outline-none">
          <mat-label>LDAP Port</mat-label>
          <input matInput placeholder="Example: 389" formControlName="ldapPort" required>
        </mat-form-field>
      </div>
      <span class="w-full text-xs text-gray-800 uppercase bg-purple-50">User DN Format <span
          class="normal-case">(Example:
          uid=johnd,ou=users,dc=example,dc=org)</span> </span>

      <div class="flex w-full space-x-2">
        <mat-form-field class="w-1/4 text-blue-800 focus:outline-none">
          <mat-label>User RDN Attribute</mat-label>
          <input matInput placeholder="Example: uid" formControlName="uid" required>
        </mat-form-field>

        <mat-form-field class="w-3/4 text-blue-800 focus:outline-none">
          <mat-label>Remaining RDNs</mat-label>
          <input matInput placeholder="Example: ou=users,dc=example,dc=org" formControlName="urdns" required>
        </mat-form-field>
      </div>

      <div class="w-full" [formGroup]="tls">
        <mat-radio-group formControlName="option" aria-label="Select a Transport Layer Security Option"
          class="flex items-center space-x-2">
          <mat-label class="text-sm">Transport Layer Security</mat-label>
          <mat-radio-button value="none">None</mat-radio-button>
          <mat-radio-button value="tls">TLS</mat-radio-button>
          <mat-radio-button value="starttls">StartTLS</mat-radio-button>
        </mat-radio-group>
      </div>

      <div class="flex flex-col w-full mt-4 border-2 border-red-100 rounded-sm">
        <span class="flex justify-between p-1 font-semibold bg-red-100 cursor-pointer"
          (click)="showTestAuthForm=!showTestAuthForm">
          <span>Click here to test LDAP Authentication</span>
          <mat-icon *ngIf="!showTestAuthForm" class="icon">arrow_drop_down</mat-icon>
          <mat-icon *ngIf="showTestAuthForm" class="icon">arrow_drop_up</mat-icon>
        </span>
        <form *ngIf="showTestAuthForm" [formGroup]="authForm"
          class="flex items-center justify-between w-full p-2 space-x-4">
          <div class="flex w-3/4 space-x-4">
            <mat-form-field class="w-1/4 text-blue-800 focus:outline-none">
              <mat-label>Username</mat-label>
              <input matInput placeholder="Example: johnd" formControlName="username" required>
            </mat-form-field>

            <mat-form-field class="w-3/4 text-blue-800">
              <mat-label>Password</mat-label>
              <input class="" matInput type="password" formControlName="pwd" required>
            </mat-form-field>
          </div>
          <button [disabled]="!authForm.valid" mat-button type="submit"
            class="py-2 mt-6 text-xs font-medium leading-3 text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200">Test
            Authentication</button>
          <!-- <button class="p-1 bg-purple-400 rounded-xl">Test Authentication</button> -->
        </form>
      </div>

    </div>



  </form>
</div>
